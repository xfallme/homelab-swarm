services:
  whoami:
    image: traefik/whoami
    networks:
      - proxy_network
    deploy:
      replicas: 3
      labels:
        caddy: whoami.$INTERNAL_DOMAIN
        caddy.reverse_proxy: "{{upstreams 80}}"

networks:
  proxy_network:
    external: true