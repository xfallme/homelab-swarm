- name: Install and configure Docker
  hosts: swarm
  become: true
  
  roles:
    - geerlingguy.docker

  tasks:
  - name: Add user to docker group
    user:
      name: "serveradmin"
      groups: "docker"
      append: true

  - name: Enable and start docker
    service:
      name: docker
      enabled: true
      state: started

  - name: Test docker
    command: docker version